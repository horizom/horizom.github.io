(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{108:function(e,r,n){"use strict";n.r(r),n.d(r,"frontMatter",(function(){return s})),n.d(r,"metadata",(function(){return l})),n.d(r,"toc",(function(){return i})),n.d(r,"default",(function(){return p}));var t=n(3),o=n(8),a=(n(0),n(128)),s={title:"Controller",description:"Route Controller"},l={unversionedId:"framework/basics/controller",id:"framework/basics/controller",isDocsHomePage:!1,title:"Controller",description:"Route Controller",source:"@site/docs/framework/basics/controller.md",sourceDirName:"framework/basics",slug:"/framework/basics/controller",permalink:"/docs/framework/basics/controller",editUrl:"https://github.com/horizom/docs/edit/master/docs/framework/basics/controller.md",version:"current",frontMatter:{title:"Controller",description:"Route Controller"},sidebar:"framework",previous:{title:"Introduction",permalink:"/docs/framework/auth/index"},next:{title:"Request",permalink:"/docs/framework/basics/request"}},i=[{value:"Introduction",id:"introduction",children:[{value:"Defining Controllers",id:"defining-controllers",children:[]},{value:"Nested Controllers",id:"nested-controllers",children:[]}]}],c={toc:i};function p(e){var r=e.components,n=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(t.a)({},c,n,{components:r,mdxType:"MDXLayout"}),Object(a.b)("h2",{id:"introduction"},"Introduction"),Object(a.b)("p",null,"Instead of defining all of your request handling logic as Closures in route files, you may wish to organize this behavior using Controller classes. Controllers can group related request handling logic into a single class. Controllers are stored in the ",Object(a.b)("inlineCode",{parentName:"p"},"app/Controller")," directory."),Object(a.b)("h3",{id:"defining-controllers"},"Defining Controllers"),Object(a.b)("p",null,"Below is an example of a basic controller class. Note that the controller extends the base controller class included with Horizom."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-php"},"<?php\n\nnamespace App\\Controller;\n\nuse Horizom\\Http\\Request;\nuse Horizom\\Http\\Response;\n\nclass User\n{\n    /**\n     * Show the profile for the given user.\n     *\n     * @param  Request  $id\n     * @param  Response  $id\n     * @param  array  $args\n     * @return Response\n     */\n    public function show(Request $request, Response $response, array $args)\n    {\n        return $response->view('user.profile', ['name' => $args['name']);\n    }\n}\n")),Object(a.b)("p",null,"You can define a route to this controller action like so:"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-php"},"<?php\n\nuse Horizom\\Http\\Route;\n\nRoute::get('user.profile', '/user/{name}', 'user@show');\n")),Object(a.b)("p",null,"Now, when a request matches the specified route URI, the ",Object(a.b)("inlineCode",{parentName:"p"},"show")," method on the ",Object(a.b)("inlineCode",{parentName:"p"},"User")," Controller class will be executed. The route parameters will also be passed to the method."),Object(a.b)("h3",{id:"nested-controllers"},"Nested Controllers"),Object(a.b)("p",null,"Sometimes you may need to define routes to a nested controllers. For example, Controllers are stored in the ",Object(a.b)("inlineCode",{parentName:"p"},"app/Controller/Api")," directory:"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-php"},"<?php\n\nnamespace App\\Controller\\Api;\n\nuse Horizom\\Http\\Request;\nuse Horizom\\Http\\Response;\n\nclass User\n{\n    /**\n     * Show the profile for the given user.\n     *\n     * @param  Request  $id\n     * @param  Response  $id\n     * @param  array  $args\n     * @return Response\n     */\n    public function login(Request $request, Response $response, array $args)\n    {\n        return $response->json(['name' => \"John Doe\"]);\n    }\n}\n")),Object(a.b)("p",null,"You can define a route to this controller action like so:"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-php"},"<?php\n\nuse Horizom\\Http\\Route;\n\nRoute::get('api.user/login', '/api/user/login', 'api/user@login');\n")))}p.isMDXComponent=!0},128:function(e,r,n){"use strict";n.d(r,"a",(function(){return u})),n.d(r,"b",(function(){return b}));var t=n(0),o=n.n(t);function a(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function s(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function l(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?s(Object(n),!0).forEach((function(r){a(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function i(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=o.a.createContext({}),p=function(e){var r=o.a.useContext(c),n=r;return e&&(n="function"==typeof e?e(r):l(l({},r),e)),n},u=function(e){var r=p(e.components);return o.a.createElement(c.Provider,{value:r},e.children)},d={inlineCode:"code",wrapper:function(e){var r=e.children;return o.a.createElement(o.a.Fragment,{},r)}},m=o.a.forwardRef((function(e,r){var n=e.components,t=e.mdxType,a=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=p(n),m=t,b=u["".concat(s,".").concat(m)]||u[m]||d[m]||a;return n?o.a.createElement(b,l(l({ref:r},c),{},{components:n})):o.a.createElement(b,l({ref:r},c))}));function b(e,r){var n=arguments,t=r&&r.mdxType;if("string"==typeof e||t){var a=n.length,s=new Array(a);s[0]=m;var l={};for(var i in r)hasOwnProperty.call(r,i)&&(l[i]=r[i]);l.originalType=e,l.mdxType="string"==typeof e?e:t,s[1]=l;for(var c=2;c<a;c++)s[c]=n[c];return o.a.createElement.apply(null,s)}return o.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);